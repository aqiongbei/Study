// 渐隐渐现轮播图思路
// 获取元素
// 自动轮播
// 焦点轮播
// 鼠标移入移出
// 焦点点击切换

// 首部轮播图
(function() {
    var oBanner = document.querySelector(".banner"),
        aLi = oBanner.getElementsByTagName("li");
    var liList = utils.makeArray(aLi);
    var n = 0;

    function autoMove() {
        n = n >= liList.length ? 0 : n;
        liList.forEach(function(item, index) {
            setBanner(n, item, index);
        })
        n++;
    }
    var timer = setInterval(autoMove, 3000);

    oBanner.onmouseover = function() {
        clearInterval(timer);
    }
    oBanner.onmouseout = function() {
        timer = setInterval(autoMove, 3000);
    };
}());

// 中部轮播图
(function() {
    var oImgList = document.querySelector(".imgList"),
        aLi = oImgList.getElementsByTagName("li");
    var liList = utils.makeArray(aLi);
    var oImgNav = document.querySelector(".imgNav");
    var aNavLi = oImgNav.getElementsByTagName("li");
    var aNavLiList = utils.makeArray(aNavLi);
    var n = 0;

    function autoMove() {
        n = n >= liList.length ? 0 : n;
        liList.forEach(function(item, index) {
            setBanner(n, item, index);
        })
        tipMove();
        n++;
    }

    var timer = setInterval(autoMove, 3000);

    oImgList.onmouseover = function() {
        clearInterval(timer);
    }
    oImgList.onmouseout = function() {
        timer = setInterval(autoMove, 3000);
    };
    aNavLiList.forEach(function(item, index) {
        item.onclick = function() {
            item.className = "on move";
            n = index;
            autoMove();
        }
    });

    function tipMove() {
        aNavLiList.forEach(function(item, index) {
            if (index === n) {
                item.className = "on move";
                var siblings = utils.siblings(item);
                siblings.forEach(function(item, index) {
                    item.className = "on";
                })
            }
        })
    }
}());
// f3动画
(function() {
    var oPoint = document.querySelector(".points");
    var aDiv = oPoint.getElementsByTagName("div");
    var aDivList = utils.makeArray(aDiv);
    oPoint.addEventListener("click", function(e) {
        e = e || window.event;
        e.target = e.target || e.srcElement;
        aDivList.forEach(function(item, index) {
            item.className = "preRange";
        });

        e.target.className += " range";
        setTimeout(function() {
            e.target.className = "preRange";
            utils.siblings(e.target).forEach(function(item, index) {
                item.className += " range";
            });
        }, 1000);

    })
}());

function setBanner(n, item, index) {
    if (n === index) {
        utils.css(utils.siblings(item)[0], "zIndex", 0);
        utils.css(item, "zIndex", 1);
        animate({
            id: item,
            effect: 0,
            target: {
                opacity: 1,
            },
            callback: function() {
                var siblings = utils.siblings(this);
                siblings.forEach(function(item, index) {
                    utils.css(item, "opacity", 0);
                })
            }
        })
    }
}
